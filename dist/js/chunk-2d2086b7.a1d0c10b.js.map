{"version":3,"sources":["webpack:///./src/views/Login.vue?472a","webpack:///./src/views/Login.vue"],"names":["_hoisted_1","_createTextVNode","_hoisted_2","_hoisted_3","_defineComponent","setup","__props","LoginForm","ref","form","reactive","email","password","phone","rules","required","min","message","trigger","type","cancel","logout","console","log","signOut","getAuth","getUserState","userState","onSubmit","formEl","validate","valid","fields","tryLogin","signInWithEmailAndPassword","res","error","_ctx","_cache","_component_el_input","_resolveComponent","_component_el_form_item","_component_el_button","_component_el_form","_openBlock","_createElementBlock","_createVNode","model","_unref","ref_key","default","_withCtx","prop","modelValue","$event","placeholder","clearable","_","onClick","value","__exports__"],"mappings":"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","file":"js/chunk-2d2086b7.a1d0c10b.js","sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"Login\")\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"Cancel\")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"Logout\")\n\nimport { reactive, ref } from 'vue';\nimport { getUserState } from '@/helpers/User';\nimport { getAuth, signInWithEmailAndPassword, signOut } from 'firebase/auth';\nimport type { FormInstance, FormRules } from 'element-plus';\n\n\nexport default /*#__PURE__*/_defineComponent({\n  setup(__props) {\n\nconst LoginForm = ref<FormInstance>();\nconst form = reactive({\n  email: '',\n  password: '',\n  phone: '',\n});\nconst rules: FormRules = reactive({\n  email: [\n    { required: true, min: 3, message: 'Please input email', trigger: 'blur' },\n    {\n      type: 'email',\n      message: 'Please input correct email address',\n      trigger: ['blur', 'change'],\n    },\n  ],\n  password: [{ required: true, min: 6, message: 'Please input password', trigger: 'blur' }],\n  phone: [{ required: true, message: 'Please input phone', trigger: 'blur' }],\n});\nconst cancel = () => {\n  form.email = '';\n  form.password = '';\n  form.phone = '';\n};\nconst logout = async () => {\n  console.log('log');\n  try {\n    await signOut(getAuth());\n    const userState = await getUserState();\n    console.log('userState', userState);\n  } catch (error) {\n    console.log(error);\n  }\n  console.log('out');\n};\n\nconst onSubmit = async (formEl: FormInstance | undefined) => {\n  if (!formEl) return;\n  await formEl.validate((valid, fields) => {\n    if (valid) {\n      console.log('submit!');\n      tryLogin();\n    } else {\n      console.log('error submit!', fields);\n    }\n  });\n};\nconst tryLogin = async () => {\n  try {\n    const res = await signInWithEmailAndPassword(getAuth(), form.email, form.password);\n    console.log(res);\n    const userState = await getUserState();\n    console.log('userState', userState);\n    cancel();\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createVNode(_component_el_form, {\n      model: _unref(form),\n      rules: _unref(rules),\n      ref_key: \"LoginForm\",\n      ref: LoginForm\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_component_el_form_item, { prop: \"email\" }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_input, {\n              modelValue: _unref(form).email,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(form).email) = $event)),\n              type: \"email\",\n              placeholder: \"Please input email\",\n              clearable: \"\"\n            }, null, 8, [\"modelValue\"])\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_form_item, { prop: \"phone\" }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_input, {\n              modelValue: _unref(form).phone,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(form).phone) = $event)),\n              type: \"text\",\n              placeholder: \"Please input phone\",\n              clearable: \"\"\n            }, null, 8, [\"modelValue\"])\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_form_item, { prop: \"password\" }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_input, {\n              modelValue: _unref(form).password,\n              \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_unref(form).password) = $event)),\n              type: \"password\",\n              placeholder: \"Please input password\",\n              \"show-password\": \"\"\n            }, null, 8, [\"modelValue\"])\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_form_item, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              onClick: _cache[3] || (_cache[3] = ($event: any) => (onSubmit(LoginForm.value)))\n            }, {\n              default: _withCtx(() => [\n                _hoisted_1\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_button, { onClick: cancel }, {\n              default: _withCtx(() => [\n                _hoisted_2\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_button, { onClick: logout }, {\n              default: _withCtx(() => [\n                _hoisted_3\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }, 8, [\"model\", \"rules\"])\n  ]))\n}\n}\n\n})","import script from \"./Login.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./Login.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"sourceRoot":""}